import{_ as N}from"./CcFNFPO9.js";import{I as K}from"./B9G3_5mb.js";import{f as B,q as P,g as R,e as i,w as t,b as o,v as I,d as f,t as u,i as c,c as O,F,m as S,a as V,u as G,o as n,x as H,s as C,H as A,A as b}from"#entry";import"./Cbu67P7Z.js";import{_ as j,T as J}from"./vVAL0Cns.js";import{T as M}from"./BA54KCtf.js";import{T as Q}from"./DigRuNIT.js";import{F as U}from"./BQqAdD1I.js";import{_ as W,L as X}from"./DRSvpow3.js";import{T as Y}from"./CIdRl2Qb.js";import{_ as z}from"./DlAUqK2U.js";import{a as Z,_ as tt}from"./BZxVwRUy.js";import{u as q,q as L}from"./BS38fHaO.js";import{_ as et}from"./BWN9M7m1.js";import"./BSFUQdk4.js";import"./ClPnXEqx.js";import"./BMD63JWs.js";import"./D8BD5nQF.js";import"./DRzhkrl-.js";import"./C5rhPHxG.js";import"./CEH7Isb9.js";import"./faib8Bls.js";import"./DXrr6bkd.js";import"./EGfgZzIS.js";import"./BTVtBCIU.js";import"./Bo73JdM_.js";import"./B-kiopFV.js";const ot=["datetime"],at=B({__name:"Item",props:{item:{}},setup(k){G(e=>({"14964d27":c(r).colorBgContainer,"10656aed":c(r).colorPrimary,"629d9ad8":c(r).colorTextTertiary}));const{isMobile:a}=P(),{token:r}=R.useToken();return(e,l)=>{const s=N,y=M,h=Q,_=J,w=Y,p=j,x=U,g=K,v=W;return n(),i(v,{class:"article-item"},{default:t(()=>[o(p,{gap:"20"},{default:t(()=>[o(p,{vertical:"",flex:"1",gap:"10",class:"main"},{default:t(()=>[o(_,null,{default:t(()=>[o(y,{level:3},{default:t(()=>[o(s,{to:e.item.path},{default:t(()=>[f(u(e.item.title),1)]),_:1},8,["to"])]),_:1}),c(a)?I("",!0):(n(),i(h,{key:0,type:"secondary"},{default:t(()=>[f(u(e.item.description),1)]),_:1}))]),_:1}),c(a)?I("",!0):(n(),i(p,{key:0},{default:t(()=>[(n(!0),O(F,null,S(e.item.tags,d=>(n(),i(s,{to:`/articles?tag=${d}`,key:d},{default:t(()=>[o(w,{color:"blue",class:"tag"},{default:t(()=>[f(u(d),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})),o(p,{justify:"space-between",class:"footer"},{default:t(()=>[o(s,{to:`/articles?cate=${e.item.category}`,class:"category"},{default:t(()=>[o(x),f(" "+u(e.item.category),1)]),_:1},8,["to"]),V("time",{datetime:e.item.date,class:"time"},u(e.item.date),9,ot)]),_:1})]),_:1}),o(s,{to:e.item.path},{default:t(()=>[o(g,{class:"img",src:e.item.poster||"https://img1.baidu.com/it/u=3543009939,2144310597&fm=253&fmt=auto&app=138&f=JPEG?w=704&h=500",alt:e.item.path},null,8,["src","alt"])]),_:1},8,["to"])]),_:1})]),_:1})}}}),st=Object.assign(z(at,[["__scopeId","data-v-c65cceee"]]),{__name:"ArticleItem"}),nt=B({__name:"Tags",setup(k){const a=Z();return(r,e)=>{const l=tt;return n(),i(l,{tags:c(a)},null,8,["tags"])}}}),rt=Object.assign(nt,{__name:"ArticleTags"}),ct={class:"tag-wrap"},T=10,it={__name:"index",async setup(k){let a,r;const e=H(),l=C(()=>+e.query.page||1),s=C(()=>e.query.tag),{data:y}=([a,r]=A(()=>q(()=>`articles-${l}`,()=>{const _=L("content");return s.value&&_.where("tags","LIKE",`%${s.value}%`),_.select("tags","category","path","title","date","poster","description").limit(T).skip((l.value-1)*T).all()},{watch:[l,s],server:!0,client:!0,default:()=>[]})),a=await a,r(),a),{data:h}=([a,r]=A(()=>q(()=>`articles-total-${s.value||"all"}`,()=>{const _=L("content");return s.value&&_.where("tags","LIKE",`%${s.value}%`),_.count()},{watch:[s],server:!0,client:!0,default:()=>0})),a=await a,r(),a);return(_,w)=>{const p=st,x=X,g=N,v=et,d=j,D=rt;return n(),O(F,null,[o(x,{"item-layout":"vertical",size:"large","data-source":c(y)},{renderItem:t(({item:m})=>[o(p,{item:m},null,8,["item"])]),_:1},8,["data-source"]),o(d,{justify:"flex-end"},{default:t(()=>[o(v,{current:c(l),total:c(h),"page-size":T,responsive:"","hide-on-single-page":"","show-total":m=>`共 ${m} 条`},{itemRender:t(({page:m,type:E,originalElement:$})=>[E==="page"?(n(),i(g,{key:0,to:`/articles?page=${m}`},{default:t(()=>[f(u(m),1)]),_:2},1032,["to"])):m>0?(n(),i(g,{key:1,to:`/articles?page=${m}`},{default:t(()=>[(n(),i(b($)))]),_:2},1032,["to"])):(n(),i(b($),{key:2}))]),_:1},8,["current","total","show-total"])]),_:1}),V("div",ct,[o(D,{title:"所有标签",path:"/articles?tag=:tag"})])],64)}}},jt=z(it,[["__scopeId","data-v-75fc2211"]]);export{jt as default};
