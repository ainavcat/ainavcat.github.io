import{_ as B}from"./CcFNFPO9.js";import{f as N,q as K,g as P,e as i,w as t,b as o,v as b,d as f,t as u,i as c,c as O,F,m as R,a as T,u as S,o as n,x as G,s as A,H as C,A as I}from"#entry";import"./Cbu67P7Z.js";import{_ as V,T as H}from"./vVAL0Cns.js";import{T as J}from"./BA54KCtf.js";import{T as M}from"./DigRuNIT.js";import{F as Q}from"./BQqAdD1I.js";import{_ as U,L as W}from"./DRSvpow3.js";import{T as X}from"./CIdRl2Qb.js";import{_ as j}from"./DlAUqK2U.js";import{a as Y,_ as Z}from"./CuKh9b4s.js";import{u as q,q as L}from"./Bqi_xSFW.js";import{_ as tt}from"./BWN9M7m1.js";import"./BSFUQdk4.js";import"./ClPnXEqx.js";import"./BMD63JWs.js";import"./D8BD5nQF.js";import"./DRzhkrl-.js";import"./C5rhPHxG.js";import"./CEH7Isb9.js";import"./faib8Bls.js";import"./DXrr6bkd.js";import"./EGfgZzIS.js";import"./BTVtBCIU.js";import"./Bo73JdM_.js";import"./B-kiopFV.js";const et=["datetime"],ot=["src","alt"],at=N({__name:"Item",props:{item:{}},setup(k){S(e=>({"1de677bc":c(r).colorBgContainer,48342802:c(r).colorPrimary,"21334ac2":c(r).colorTextTertiary}));const{isMobile:a}=K(),{token:r}=P.useToken();return(e,l)=>{const s=B,y=J,h=M,_=H,w=X,p=V,v=Q,g=U;return n(),i(g,{class:"article-item"},{default:t(()=>[o(p,{gap:"20"},{default:t(()=>[o(p,{vertical:"",flex:"1",gap:"10",class:"main"},{default:t(()=>[o(_,null,{default:t(()=>[o(y,{level:3,class:"title"},{default:t(()=>[o(s,{to:e.item.path},{default:t(()=>[f(u(e.item.title),1)]),_:1},8,["to"])]),_:1}),c(a)?b("",!0):(n(),i(h,{key:0,type:"secondary"},{default:t(()=>[f(u(e.item.description),1)]),_:1}))]),_:1}),c(a)?b("",!0):(n(),i(p,{key:0},{default:t(()=>[(n(!0),O(F,null,R(e.item.tags,d=>(n(),i(s,{to:`/articles?tag=${d}`,key:d},{default:t(()=>[o(w,{color:"blue",class:"tag"},{default:t(()=>[f(u(d),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})),o(p,{justify:"space-between",class:"footer"},{default:t(()=>[o(s,{to:`/articles?cate=${e.item.category}`,class:"category"},{default:t(()=>[o(v),f(" "+u(e.item.category),1)]),_:1},8,["to"]),T("time",{datetime:e.item.date,class:"time"},u(e.item.date),9,et)]),_:1})]),_:1}),o(s,{to:e.item.path},{default:t(()=>[T("img",{class:"img",src:e.item.poster||"https://img1.baidu.com/it/u=3543009939,2144310597&fm=253&fmt=auto&app=138&f=JPEG?w=704&h=500",alt:e.item.path},null,8,ot)]),_:1},8,["to"])]),_:1})]),_:1})}}}),st=Object.assign(j(at,[["__scopeId","data-v-65d6d6a6"]]),{__name:"ArticleItem"}),nt=N({__name:"Tags",setup(k){const a=Y();return(r,e)=>{const l=Z;return n(),i(l,{tags:c(a)},null,8,["tags"])}}}),rt=Object.assign(nt,{__name:"ArticleTags"}),ct={class:"tag-wrap"},x=10,it={__name:"index",async setup(k){let a,r;const e=G(),l=A(()=>+e.query.page||1),s=A(()=>e.query.tag),{data:y}=([a,r]=C(()=>q(()=>`articles-${l}`,()=>{const _=L("content");return s.value&&_.where("tags","LIKE",`%${s.value}%`),_.select("tags","category","path","title","date","poster","description").limit(x).skip((l.value-1)*x).all()},{watch:[l,s],server:!0,client:!0,default:()=>[]})),a=await a,r(),a),{data:h}=([a,r]=C(()=>q(()=>`articles-total-${s.value||"all"}`,()=>{const _=L("content");return s.value&&_.where("tags","LIKE",`%${s.value}%`),_.count()},{watch:[s],server:!0,client:!0,default:()=>0})),a=await a,r(),a);return(_,w)=>{const p=st,v=W,g=B,d=tt,z=V,D=rt;return n(),O(F,null,[o(v,{"item-layout":"vertical",size:"large","data-source":c(y)},{renderItem:t(({item:m})=>[o(p,{item:m},null,8,["item"])]),_:1},8,["data-source"]),o(z,{justify:"flex-end"},{default:t(()=>[o(d,{current:c(l),total:c(h),"page-size":x,responsive:"","hide-on-single-page":"","show-total":m=>`共 ${m} 条`},{itemRender:t(({page:m,type:E,originalElement:$})=>[E==="page"?(n(),i(g,{key:0,to:`/articles?page=${m}`},{default:t(()=>[f(u(m),1)]),_:2},1032,["to"])):m>0?(n(),i(g,{key:1,to:`/articles?page=${m}`},{default:t(()=>[(n(),i(I($)))]),_:2},1032,["to"])):(n(),i(I($),{key:2}))]),_:1},8,["current","total","show-total"])]),_:1}),T("div",ct,[o(D,{title:"所有标签",path:"/articles?tag=:tag"})])],64)}}},Vt=j(it,[["__scopeId","data-v-75fc2211"]]);export{Vt as default};
